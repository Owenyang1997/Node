## 简易RPC项目
 * 项目结构?
    1. RpcServer :包含 NettyServer, 负责网络通信，zkServer: 服务统一管理，负载均衡等（负责将服务注册到zk）
    2. RpcClient :包含 NettyClient, 负责网络数据传输，zkClient: 根据服务名取出服务列表
    3. Linsener  : 使用ApplicationLinserner 的 ContextRefredEven事件启动服务端，与客户端，将服务注册，将远程服务的属性注入代理对象等工作。
    4. Hanlder   : 通过反射方式调用远程服务，然后将处理信息返回到客户端。
   
 * 项目简介？   
    使用Netty做网络通信框架，zk管理服务，spring框架管理类。搭建一个简单的远程控制访问框架。  
    
 * 项目启动？  
    首先，使用ApplicationLinserner 监听器的 ContextRefredEven事件 负责 整体项目的启动，
    首先，将所有需要暴露的远程服务的方法，在zk中注册保存，然后启动Netty服务端。
    然后，将所有需要远程服务的属性，生成代理对象，注入。
    在代理对象中：
      获取所有该方法的服务列表，负载均衡，RPC请求，客户端发送，服务端接收，并通过Hanlder 反射处理，将结构返回。  
  * 项目有哪些难点？  
    1. 如何启动项目？使用监听器。
    2. 如何知道那些方法是要暴露的？那些属性是需要远程服务的？通过自定义注解，带有自定义注解的属性，方法进行操作。
    3. 如何将项目设置未一个Spring-Start项目？在Spring.factories配置文件中配置配置类的路径，然后再配置类中加载所有需要的类到容器中
    
## 抢红包模块？
  * 版本一：使用redis的悲观锁实现，同步，记录发红包的金额：string, 发红包的数量： string, 抢到红包的人：set. watch(红包剩余量)，首先判断用户是抢过红包（set中是否包含该用户），然后判断红包容量是否有剩余，然后随机生成一个金额，开启事务，将 红包数量修改decr(),红包金额修改decrby(), 将用户id添加set操作入队列，然后执行事务，这些操作被绑定为原子操作，保证只有一个成功执行。这样就带来了一个问题，判断库存数量，与后面更新操作不是原子操作，可能同时有100个用户同时判断库存有剩余，这样只有一个用户执行成功，会导致红包有剩余情况。
  * 版本二：使用lua脚本，将上述的所有逻辑绑定原子操作，有个问题，红包金额生成是java代码，无法使用lua脚本，所以，改变策略，首先将红包划分出随机金额，然后存入list，然后存储，总金额，和set，这样抢红包可以直接从list中pop一个，并将总数量减一，然后将抢到红包的user存到set，这些操作，与库存检测一起称为原子操作，这样。可以解决上述问题。
  
## Web项目，
* 使用Mysql,Spring,Html,Js,CSS等完成，实现增删改查，等业务逻辑。难点：权限，角色管理，不同角色显示不同页面。老师，学生登录显示不同页面，创建角色权限表：包括角色id,角色权限字段（使用一个int的每一位代表一个服务的权限，这样可以划分出32个权限。）将角色存在redis中，每次页面访问控制都进行权限管理。（使用拦截器。HandlerInterceptor ）

## 公司项目？
* 红包发布任务，要求使用锁机制，实现并发安全，分布式系统，使用redis实现分布式锁。使用锁表识和key存活时间，解决锁误删，死锁问题，同时使用getSet(),保证在key失活的时候只有一个线程加锁成功。

* 发布定时执行任务，由于任务定时执行，执行时间可能会冲突，而且有些方法需要实现共享数据的访问，所以任务需要同步安全，如果将加锁操作与业务逻辑脱离？
使用Redis实现锁机制，（发红包任务实现的锁），为了与业务逻辑脱离，使用注解+AOP,动态代理方式，只需要在需要加锁的方法上加上我们自定义的注解类型就可以。同时我们实现了不同的加锁失败的策略，策略一：睡眠5秒后重试，一直到加锁成功，策略二：加锁失败就推出任务的执行。
  
 
